import{aE as il,r as b}from"./index.ba5b7db6.js";const cl=il("production-calc",()=>{const L=b(0),Y=b(0),a=b([]),Ce=b(0),Te=b(0),O=b(0),$=b(0),we=b(0),de=b(!1),ce=b(!1),Be=b(!1),u=b({}),ee=b({}),Ue=b(!1),s=2,G=1/30,je=1/(60*30),Ie=1e4,Q=b(0),K=b(0);function Ee(h={},N,x,g,o,c=[]){const t=h.ingredient_percentage;let i=1;N==="\uC2DD\uC7AC\uB8CC \uB3C4\uC6B0\uBBF8 \uD655\uB960 \u25B2\u25B2"?i=g:x==="\uC2DD\uC7AC\uB8CC \uB3C4\uC6B0\uBBF8 \uD655\uB960 \u25BD\u25BD"&&(i=o);let n=1;for(let e=0;e<c.length;e++)(c[e].label==="\uC2DD\uC7AC\uB8CC \uD655\uB960 \uC5C5 M"||c[e].label==="\uC2DD\uC7AC\uB8CC \uD655\uB960 \uC5C5 s")&&(n+=c[e].mult);return t*i*n/100}function De(h={},N,x,g,o,c=[]){const t=h.skill_percentage,i=N==="\uBA54\uC778 \uC2A4\uD0AC \uBC1C\uB3D9\uB960 \u25B2\u25B2"?g:x==="\uBA54\uC778 \uC2A4\uD0AC \uBC1C\uB3D9\uB960 \u25BD\u25BD"?o:1;let n=1;for(let e=0;e<c.length;e++)(c[e].label==="\uC2A4\uD0AC \uD655\uB960 \uC5C5 M"||c[e].label==="\uC2A4\uD0AC \uD655\uB960 \uC5C5 s")&&(n+=c[e].mult);return t*i*n/100}function Le(h,N,x,g,o,c,t,i,n=[],e={},r,A){const B=x==="\uB3C4\uC6B0\uBBF8 \uC2A4\uD53C\uB4DC \u25B2\u25B2"?o:g==="\uB3C4\uC6B0\uBBF8 \uC2A4\uD53C\uB4DC \u25BD\u25BD"?c:1,m=t*i;let p=0;for(let v=0;v<n.length;v++)(n[v].label==="\uB3C4\uC6B0\uBBF8 \uC2A4\uD53C\uB4DC M"||n[v].label==="\uB3C4\uC6B0\uBBF8 \uC2A4\uD53C\uB4DC s"||n[v].label==="\uB3C4\uC6B0\uBBF8 \uBCF4\uB108\uC2A4")&&(p+=n[v].mult);p=p+m>=r?r:p+m;const k=(501-N)/500*B*(1-p)*(1-h/100),f=A?.8:1;return e.frequency*k*je*f}function el(h=!1,N=100,x,g,o,c,t,i,n,e,r,A,B,m,p,k="",f,v,P,le,ae,_,q,Pe,ye,J,H,te,ne=[],re=0,Me="",Ne="",U="",xe="",Xe="",y=!1){a.value=[];let M=te.main_skills.amount[p-1],V=r.main_skills.amount[e-1],ke=!1,Ae=1;r.main_skills.name.includes("Charge Energy")?(ke=!0,Ae=1):r.main_skills.name.includes("Energizing Cheer")?(ke=!0,Ae=5):r.main_skills.name.includes("Energy For Everyone")&&(ke=!0,Ae=1);let We=k.split(":");const se=parseInt(We[0],10),ve=parseInt(We[1],10),fe=24*s-se*s-ve*G,Ve=fe-1,Ze=Ve-Math.floor((fe-7*s)/2),$e=Ze-6*s;function Fe(X){for(const oe of A)if(X>=oe.e)return oe.m}let Re=1;le==="\uAE30\uB825 \uD68C\uBCF5\uB7C9 \u25B2\u25B2"?(Re=_,M=Math.floor(M*_),V=Math.floor(V*_)):ae==="\uAE30\uB825 \uD68C\uBCF5\uB7C9 \u25BD\u25BD"&&(Re=q,M=Math.floor(M*q),V=Math.floor(V*q));const _e=h?N:100,Ge=Pe*ye+1;let d=_e/(P/s)*(se*s+ve*G)*Re*Ge;d=d>_e?_e:Math.floor(d);function T(X){return X>m?m:X}if(f!=="proVer"){let E=function(l,I=1,W=M){let Z=0;switch(l===0?Z=d+W:a.value[a.value.length-1].y<=0?Z=W*I:Z=a.value[a.value.length-1].y+W*I-Math.floor(J/s),Z){case Z>m:return m;case Z<0:return 0;default:return Z}};a.value.push({x:0,y:d}),f!=="lightVer"&&(M=0);const X=f==="lightVer"?Math.floor(fe/v):0,oe=Q.value>0?Math.floor(fe/Q.value):1;let j=v;for(let l=0;l<fe+1;l++){let I=E(l,0);if(a.value.push({x:l,y:I}),l===0&&(j-=1),(l===$e||l===Ze||l===Ve)&&a.value.push({x:l,y:T(I+Fe(I))}),ke&&(l%oe===0||l===0)&&Q.value>0){let W=E(l,1,V);a.value.push({x:l,y:T(W)}),Q.value-=1}if(l>0&&f==="lightVer"&&l%X===0&&j>0){let W=E(l);a.value.push({x:l,y:T(W)}),j-=1}}K.value=be("me",x,k,a.value[a.value.length-1].y,H,r,c,o,t,i,n,J,B)}else if(f==="proVer"){let he=function(S,F,me){let ie=me>m?m:me;S>0?a.value[F].y=(a.value[F].y*S+ie)/(S+1):a.value.push({x:F,y:ie})},nl=function(S){let F=0;return l>0&&(l=l-1*(J/s),l>m&&(l=m)),l<=0&&(l=0),a.value[S-1].y>0&&(F=a.value[S-1].y-1*(J/s),F>m&&(F=m)),F<0?0:F},X=te.main_skills.amount[p-1],oe=1;xe==="\uAE30\uB825 \uD68C\uBCF5\uB7C9 \u25B2\u25B2"?(oe=_,X=Math.floor(X*_)):Xe==="\uAE30\uB825 \uD68C\uBCF5\uB7C9 \u25BD\u25BD"&&(oe=q,X=Math.floor(X*q));const E=y?N:100;let j=E/(P/s)*(se*s+ve*G)*oe*Ge;j=j>E?E:j;let l=j,I=.8,W=0,Z=.4,Ye=0;for(let S=0;S<Ie;S++){let F=Math.random(),me=Math.random(),ie=0;F<I?(l+=X,ie=1,F<W&&(l+=X,l=T(Math.floor(l)),ie=2),me<Z?me<Ye?he(S,0,T(d+V*2+M*ie)):he(S,0,T(d+V+M*ie)):he(S,0,T(d+M*ie))):me<Z?me<Ye?he(S,0,T(d+V*2)):he(S,0,T(d+V)):he(S,0,T(d));let ge=Y.value,Se=L.value;for(let z=1;z<fe+1;z++){let ze=function(C){for(let w=0;w<H.length;w++)if(C>H[w].e)return qe=H[w].e,H[w].m;return H[H.length-1].m},Ke=function(C,w,R){return(w-R)/(J/s)+C};l=T(l);const Qe=l;let D=nl(z),qe=0;const He=ze(l),pe=ze(Qe);let Je=0;if(He!==pe){let C=Ke(z-1,Qe,qe)-(z-1);ge=ge-(C/pe+(1-C)/He)%Y.value,Je=Math.floor((C/pe+(1-C)/He)/Y.value)}else ge=ge-1/pe%Y.value,Je=Math.floor(1/pe/Y.value);if(ge<=0&&(Je+=1,ge+=Y.value),ke){let C=0;const w=ze(D),R=ze(a.value[z-1].y);if(w!==R){let Oe=Ke(z-1,a.value[z-1].y,qe)-(z-1);Se=Se-(Oe/R+(1-Oe)/w)%L.value,C=Math.floor((Oe/R+(1-Oe)/w)/L.value)}else Se=Se-1/pe%Y.value,C=Math.floor(1/pe/Y.value);Se<=0&&(C+=1,Se+=L.value),(z===$e||z===Ze||z===Ve)&&(D+=Fe(D),l+=Fe(l));const ue=1-Math.pow(1-O.value/Ae,C);C>0&&Math.random()<ue&&(D+=V)}const ol=1-Math.pow(1-$.value,Je);if(Je>0&&Math.random()<ol&&(D+=M,l+=X),he(S,z,T(D)),l=T(l),z===fe){let C=l,w=0;if(D-Math.ceil(J/s*(se*s+ve*G))<0?w=0:w=D-Math.ceil(J/s*(se*s+ve*G)),l-Math.ceil(J/s*(se*s+ve*G))<0?l=0:l=l-Math.ceil(J/s*(se*s+ve*G)),d=w+d>_e?_e:w+d,l=l+j>E?E:l+j,ke){const ue=be("me",x,k,D,H,r,c,o,t,i,n,J,B);Z=1-Math.pow(1-O.value/Ae,ue),r.specialty=="skill"&&(Z=ue*O.value*Math.pow(1-O.value,ue-1),Ye=1-Math.pow(1-O.value,ue)-ue*O.value*Math.pow(1-O.value,ue-1))}const R=be("healer",g,k,C,H,te,ne,re,Me,Ne,U,J,B);I=1-Math.pow(1-$.value,R),te.specialty=="skill"&&(I=R*$.value*Math.pow(1-$.value,R-1),W=1-Math.pow(1-$.value,R)-R*$.value*Math.pow(1-$.value,R-1))}}}}}function ll(h=[],N="target",x,g){ee.value={},h.forEach(e=>{ee.value[e.m]=0});let o=0;function c(e){for(let r=0;r<h.length;r++)if(e>h[r].e)return o=h[r].e,h[r].m;return o=h[h.length-1].e,h[h.length-1].m}function t(e,r,A){return(A-a.value[e].y)/((a.value[e].y-a.value[r].y)/(a.value[e].x-a.value[r].x))+a.value[e].x}for(let e=0;e<a.value.length-1;e++)if(a.value[e].x!==a.value[e+1].x){let r=c(a.value[e+1].y),A=a.value[e].x,B=!0,m=a.value[e+1].x;N==="proVer"&&a.value[e].y<=a.value[e+1].y&&(r=c(a.value[e].y-x/s*(a.value[e+1].x-a.value[e].x)));let p=c(a.value[e].y);for(;B;)p===r?(ee.value[p]+=a.value[e+1].x-A,B=!1):(m=t(e,e+1,o),ee.value[p]+=m-A,p=c(o),A=m)}let i=0;for(let e in ee.value)i+=ee.value[e]/parseFloat(e);we.value=Math.floor(i/L.value);const n=K.value*O.value>g?g:K.value*O.value;Q.value=we.value*O.value+n}function al(h,N,x,g=!1,o={},c,t,i,n,e,r,A,B,m,p){h==="proVer"&&(K.value=be("me",N,e,a.value[a.value.length-1].y,A,o,B,c,t,i,n,r,m));function k(f,v){const P=o[`ingredient${v}`].find(le=>le.name===f).amount;return g?K.value*Ce.value*P:(we.value+K.value)*Ce.value*P}if(u.value[t]=k(t,0),c>=30&&(i===t?(u.value[t]=(u.value[t]+k(i,30))/2,de.value=!1):(u.value[t]=u.value[t]/2,u.value[i]=k(i,30)/2,de.value=!0),c>=60&&(u.value[t]=u.value[t]*2/3,t===i?n!==i?(u.value[n]=k(n,60)/3,ce.value=!0):(u.value[t]=u.value[t]+k(n,60)/3,ce.value=!1):(u.value[i]=u.value[i]*2/3,n===t?(u.value[t]=u.value[t]+k(n,60)/3,ce.value=!1):n===i?(u.value[i]=u.value[i]+k(n,60)/3,ce.value=!1):(u.value[n]=k(n,60)/3,ce.value=!0)))),o.main_skills.unit==="ingredients"){if(Math.min(K.value*O.value,x),o.main_skills.name.includes("Magnet"))(async()=>{try{const v=(await fetch("https://rxgqybcxgapiftblwttl.supabase.co/rest/v1/ingredients?select=name&limit=1",{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ4Z3F5YmN4Z2FwaWZ0Ymx3dHRsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MTcyNTUsImV4cCI6MjA2NTM5MzI1NX0.IAPEGqdMdslVi305yUEsdYqh-ecVOlb82BgvXMTmpwA",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ4Z3F5YmN4Z2FwaWZ0Ymx3dHRsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MTcyNTUsImV4cCI6MjA2NTM5MzI1NX0.IAPEGqdMdslVi305yUEsdYqh-ecVOlb82BgvXMTmpwA",Prefer:"count=exact"}})).headers.get("content-range"),P=v?parseInt(v.split("/")[1]):null,le=Math.ceil(o.main_skills.amount[p-1]/3),ae=1-(1-1/P)*(1-1/(P-1))*(1-1/(P-2)),_=Q.value*le*ae;Be.value=!0,u.value[t]+=_,u.value.hasOwnProperty(i)&&(u.value[i]+=_),u.value.hasOwnProperty(n)&&(u.value[n]+=_),u.value.all=_}catch(f){console.log("ing Fetch problem: "+f.message)}})();else if(o.main_skills.name.includes("Draw")){const f=Q.value*o.main_skills.avg_amount[p-1]/o.main_skills.selection.length;o.main_skills.selection.forEach(v=>{u.value.hasOwnProperty(v)?u.value[v]+=f:u.value[v]=f})}}}function be(h,N,x,g,o,c,t,i,n,e,r,A,B){let m=x.split(":");const p=parseInt(m[0],10),k=parseInt(m[1],10),f=h==="healer"?Te.value:Ce.value;let v={};o.forEach(y=>{v[y.m]=0});let P=0;function le(y){for(let M=0;M<o.length;M++)if(y>o[M].e)return P=o[M].e,o[M].m;return P=0,o[o.length-1].m}let ae=le(g),_=0,q=(g-P)/(A/s);for(;ae!==o[o.length-1].m;)v[ae]+=q-_,ae=le(P),_=q,q=(g-P)/(A/s);q=p*s+k*G,v[ae]+=q-_;let Pe=0;for(let y in v)Pe+=v[y]/parseFloat(y);let ye=0;h==="me"?ye=Math.floor(Pe/L.value):ye=Math.floor(Pe/Y.value);let J=!1;const H=B?1.2:1;let te=(c.carry_size+c.previous_evolutions*5)*H+N;for(let y=0;y<t.length;y++)t[y].label==="\uCD5C\uB300 \uC18C\uC9C0 \uC218 \uC5C5 L"||t[y].label==="\uCD5C\uB300 \uC18C\uC9C0 \uC218 \uC5C5 M"||t[y].label==="\uCD5C\uB300 \uC18C\uC9C0 \uC218 \uC5C5 s"?te+=t[y].mult:t[y].label==="\uB098\uBB34\uC5F4\uB9E4 \uC218 s"&&(J=!0);function ne(y,M){return c[`ingredient${M}`].find(V=>V.name===y).amount}let re=0,Me=0,Ne=0,U=1;switch(!0){case i>=60:U=3,re=ne(n,0)*f/U,Me=ne(e,30)*f/U,Ne=ne(r,60)*f/U;break;case i>=30:U=2,re=ne(n,0)*f/U,Me=ne(e,30)*f/U;break;default:U=1,re=ne(n,0)*f/U}let xe=1;c.specialty==="berry"&&(xe+=1),J&&(xe+=1);const Xe=xe*(1-f);return Math.ceil(te/(Xe+re+Me+Ne))>ye?ye:Math.ceil(te/(Xe+re+Me+Ne))}function tl(){L.value=0,Y.value=0,a.value=[],we.value=0,Ce.value=0,Te.value=0,O.value=0,$.value=0,de.value=!1,ce.value=!1,Be.value=!1,Ue.value=!1,u.value={},ee.value={},Q.value=0,K.value=0}return{onlyBaseSpeed:L,onlyBaseSpeedH:Y,energyAxis:a,finalSpeedCount:we,finalIngProc:Ce,finalIngProcH:Te,finalSkillProc:O,finalSkillProcH:$,checkSecondDisplay:de,checkThirdDisplay:ce,checkIngSkillDisplay:Be,totalIngCalc:u,timeStaying:ee,calcLoading:Ue,convertH:s,convertM:G,convertS:je,simulationCount:Ie,selfSkillCount:Q,helpCountSleep:K,calcIngProc:Ee,calcBaseSpeed:Le,calcEnergyCurve:el,calcSpeedWithEner:ll,clearCalc:tl,calcSleepSpeedCount:be,calcLeveLIng:al,calcSkillProc:De}});export{cl as u};
