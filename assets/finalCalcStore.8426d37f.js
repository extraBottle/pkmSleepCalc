import{aE as ul,r as g}from"./index.d1ad3a90.js";const rl=ul("production-calc",()=>{const D=g(0),Y=g(0),a=g([]),we=g(0),Be=g(0),X=g(0),$=g(0),ye=g(0),ze=g(!1),ue=g(!1),Ve=g(!1),u=g({}),L=g({}),je=g(!1),s=2,G=1/30,Ie=1/(60*30),We=1e4,ce=g(0),be=g(0),ee=g(0);function De(h={},x,O,S,o,c=[]){const t=h.ingredient_percentage;let i=1;x==="\uC2DD\uC7AC\uB8CC \uB3C4\uC6B0\uBBF8 \uD655\uB960 \u25B2\u25B2"?i=S:O==="\uC2DD\uC7AC\uB8CC \uB3C4\uC6B0\uBBF8 \uD655\uB960 \u25BD\u25BD"&&(i=o);let n=1;for(let e=0;e<c.length;e++)(c[e].label==="\uC2DD\uC7AC\uB8CC \uD655\uB960 \uC5C5 M"||c[e].label==="\uC2DD\uC7AC\uB8CC \uD655\uB960 \uC5C5 s")&&(n+=c[e].mult);return t*i*n/100}function Le(h={},x,O,S,o,c=[]){const t=h.skill_percentage,i=x==="\uBA54\uC778 \uC2A4\uD0AC \uBC1C\uB3D9\uB960 \u25B2\u25B2"?S:O==="\uBA54\uC778 \uC2A4\uD0AC \uBC1C\uB3D9\uB960 \u25BD\u25BD"?o:1;let n=1;for(let e=0;e<c.length;e++)(c[e].label==="\uC2A4\uD0AC \uD655\uB960 \uC5C5 M"||c[e].label==="\uC2A4\uD0AC \uD655\uB960 \uC5C5 s")&&(n+=c[e].mult);return t*i*n/100}function el(h,x,O,S,o,c,t,i,n=[],e={},r,N){const B=O==="\uB3C4\uC6B0\uBBF8 \uC2A4\uD53C\uB4DC \u25B2\u25B2"?o:S==="\uB3C4\uC6B0\uBBF8 \uC2A4\uD53C\uB4DC \u25BD\u25BD"?c:1,m=t*i;let y=0;for(let v=0;v<n.length;v++)(n[v].label==="\uB3C4\uC6B0\uBBF8 \uC2A4\uD53C\uB4DC M"||n[v].label==="\uB3C4\uC6B0\uBBF8 \uC2A4\uD53C\uB4DC s"||n[v].label==="\uB3C4\uC6B0\uBBF8 \uBCF4\uB108\uC2A4")&&(y+=n[v].mult);y=y+m>=r?r:y+m;const M=(501-x)/500*B*(1-y)*(1-h/100),f=N?.8:1;return e.frequency*M*Ie*f}function ll(h=!1,x=100,O,S,o,c,t,i,n,e,r,N,B,m,y,M="",f,v,P,le,ae,_,q,xe,ke,A,U,Q,te=[],re=0,Me="",Ne="",H="",_e="",Xe="",k=!1){a.value=[];let p=Q.main_skills.amount[y-1];Q.main_skills.name.includes("Energizing Cheer")&&(p=p/5);let V=r.main_skills.amount[e-1],ge=!1,Ae=1;r.main_skills.name.includes("Charge Energy")?(ge=!0,Ae=1):r.main_skills.name.includes("Energizing Cheer")?(ge=!0,Ae=5):r.main_skills.name.includes("Energy For Everyone")&&(ge=!0,Ae=1);let $e=M.split(":");const se=parseInt($e[0],10),ve=parseInt($e[1],10),fe=24*s-se*s-ve*G,Ze=fe-1,Fe=Ze-Math.floor((fe-7*s)/2),Ge=Fe-6*s;function Re(J){for(const ne of N)if(J>=ne.e)return ne.m}let Ye=1;le==="\uAE30\uB825 \uD68C\uBCF5\uB7C9 \u25B2\u25B2"?(Ye=_,p=Math.floor(p*_),V=Math.floor(V*_)):ae==="\uAE30\uB825 \uD68C\uBCF5\uB7C9 \u25BD\u25BD"&&(Ye=q,p=Math.floor(p*q),V=Math.floor(V*q));const de=h?x:100,Qe=xe*ke+1;let d=de/(P/s)*(se*s+ve*G)*Ye*Qe;d=d>de?de:Math.floor(d);function T(J){return J>m?m:J}if(f!=="proVer"){let K=function(l,I=1,W=p){let Z=0;switch(l===0?Z=d+W:a.value[a.value.length-1].y<=0?Z=W*I:Z=a.value[a.value.length-1].y+W*I-Math.floor(A/s),Z){case Z>m:return m;case Z<0:return 0;default:return Z}};a.value.push({x:0,y:d}),f!=="lightVer"&&(p=0);const J=f==="lightVer"?Math.floor(fe/v):0,ne=ce.value>0?Math.floor(fe/ce.value):1;let j=v;for(let l=0;l<fe+1;l++){let I=K(l,0);if(a.value.push({x:l,y:I}),l===0&&(j-=1),(l===Ge||l===Fe||l===Ze)&&a.value.push({x:l,y:T(I+Re(I))}),ge&&(l%ne===0||l===0)&&ce.value>0){let W=K(l,1,V);a.value.push({x:l,y:T(W)}),ce.value-=1}if(l>0&&f==="lightVer"&&l%J===0&&j>0){let W=K(l);a.value.push({x:l,y:T(W)}),j-=1}}ee.value=Pe("me",O,M,a.value[a.value.length-1].y,U,r,c,o,t,i,n,A,B)}else if(f==="proVer"){let he=function(C,F,me){let oe=me>m?m:me;C>0?a.value[F].y=(a.value[F].y*C+oe)/(C+1):a.value.push({x:F,y:oe})},ol=function(C){let F=0;return l>0&&(l=l-1*(A/s),l>m&&(l=m)),l<=0&&(l=0),a.value[C-1].y>0&&(F=a.value[C-1].y-1*(A/s),F>m&&(F=m)),F<0?0:F},J=Q.main_skills.amount[y-1],ne=1;_e==="\uAE30\uB825 \uD68C\uBCF5\uB7C9 \u25B2\u25B2"?(ne=_,J=Math.floor(J*_)):Xe==="\uAE30\uB825 \uD68C\uBCF5\uB7C9 \u25BD\u25BD"&&(ne=q,J=Math.floor(J*q));const K=k?x:100;let j=K/(P/s)*(se*s+ve*G)*ne*Qe;j=j>K?K:j;let l=j,I=.8,W=0,Z=.4,qe=0;for(let C=0;C<We;C++){let F=Math.random(),me=Math.random(),oe=0;F<I?(l+=J,oe=1,F<W&&(l+=J,l=T(Math.floor(l)),oe=2),me<Z?me<qe?he(C,0,T(d+V*2+p*oe)):he(C,0,T(d+V+p*oe)):he(C,0,T(d+p*oe))):me<Z?me<qe?he(C,0,T(d+V*2)):he(C,0,T(d+V)):he(C,0,T(d));let Se=Y.value,Ce=D.value;for(let z=1;z<fe+1;z++){let Oe=function(w){for(let b=0;b<U.length;b++)if(w>U[b].e)return Ue=U[b].e,U[b].m;return U[U.length-1].m},Ee=function(w,b,R){return(b-R)/(A/s)+w};l=T(l);const Ke=l;let E=ol(z),Ue=0;const He=Oe(l),pe=Oe(Ke);let Je=0;if(He!==pe){let w=Ee(z-1,Ke,Ue)-(z-1);Se=Se-(w/pe+(1-w)/He)%Y.value,Je=Math.floor((w/pe+(1-w)/He)/Y.value)}else Se=Se-1/pe%Y.value,Je=Math.floor(1/pe/Y.value);if(Se<=0&&(Je+=1,Se+=Y.value),ge){let w=0;const b=Oe(E),R=Oe(a.value[z-1].y);if(b!==R){let Te=Ee(z-1,a.value[z-1].y,Ue)-(z-1);Ce=Ce-(Te/R+(1-Te)/b)%D.value,w=Math.floor((Te/R+(1-Te)/b)/D.value)}else Ce=Ce-1/pe%Y.value,w=Math.floor(1/pe/Y.value);Ce<=0&&(w+=1,Ce+=D.value),(z===Ge||z===Fe||z===Ze)&&(E+=Re(E),l+=Re(l));const ie=1-Math.pow(1-X.value/Ae,w);w>0&&Math.random()<ie&&(E+=V)}const il=1-Math.pow(1-$.value,Je);if(Je>0&&Math.random()<il&&(E+=p,l+=J),he(C,z,T(E)),l=T(l),z===fe){let w=l,b=0;if(E-Math.ceil(A/s*(se*s+ve*G))<0?b=0:b=E-Math.ceil(A/s*(se*s+ve*G)),l-Math.ceil(A/s*(se*s+ve*G))<0?l=0:l=l-Math.ceil(A/s*(se*s+ve*G)),d=b+d>de?de:b+d,l=l+j>K?K:l+j,ge){const ie=Pe("me",O,M,E,U,r,c,o,t,i,n,A,B);Z=1-Math.pow(1-X.value/Ae,ie),r.specialty=="skill"&&(Z=ie*X.value*Math.pow(1-X.value,ie-1),qe=1-Math.pow(1-X.value,ie)-ie*X.value*Math.pow(1-X.value,ie-1))}const R=Pe("healer",S,M,w,U,Q,te,re,Me,Ne,H,A,B);I=1-Math.pow(1-$.value,R),Q.specialty=="skill"&&(I=R*$.value*Math.pow(1-$.value,R-1),W=1-Math.pow(1-$.value,R)-R*$.value*Math.pow(1-$.value,R-1))}}}}}function al(h=[],x="target",O,S){L.value={},h.forEach(e=>{L.value[e.m]=0});let o=0;function c(e){for(let r=0;r<h.length;r++)if(e>h[r].e)return o=h[r].e,h[r].m;return o=h[h.length-1].e,h[h.length-1].m}function t(e,r,N){return(N-a.value[e].y)/((a.value[e].y-a.value[r].y)/(a.value[e].x-a.value[r].x))+a.value[e].x}for(let e=0;e<a.value.length-1;e++)if(a.value[e].x!==a.value[e+1].x){let r=c(a.value[e+1].y),N=a.value[e].x,B=!0,m=a.value[e+1].x;x==="proVer"&&a.value[e].y<=a.value[e+1].y&&(r=c(a.value[e].y-O/s*(a.value[e+1].x-a.value[e].x)));let y=c(a.value[e].y);for(;B;)y===r?(L.value[y]+=a.value[e+1].x-N,B=!1):(m=t(e,e+1,o),L.value[y]+=m-N,y=c(o),N=m)}let i=0;for(let e in L.value)i+=L.value[e]/parseFloat(e);ye.value=Math.floor(i/D.value);const n=ee.value*X.value>S?S:ee.value*X.value;ce.value=ye.value*X.value+n,be.value=ye.value*X.value+n}function tl(h,x,O,S=!1,o={},c,t,i,n,e,r,N,B,m,y){h==="proVer"&&(ee.value=Pe("me",x,e,a.value[a.value.length-1].y,N,o,B,c,t,i,n,r,m));function M(f,v){const P=o[`ingredient${v}`].find(le=>le.name===f).amount;return S?ee.value*we.value*P:(ye.value+ee.value)*we.value*P}if(u.value[t]=M(t,0),c>=30&&(i===t?(u.value[t]=(u.value[t]+M(i,30))/2,ze.value=!1):(u.value[t]=u.value[t]/2,u.value[i]=M(i,30)/2,ze.value=!0),c>=60&&(u.value[t]=u.value[t]*2/3,t===i?n!==i?(u.value[n]=M(n,60)/3,ue.value=!0):(u.value[t]=u.value[t]+M(n,60)/3,ue.value=!1):(u.value[i]=u.value[i]*2/3,n===t?(u.value[t]=u.value[t]+M(n,60)/3,ue.value=!1):n===i?(u.value[i]=u.value[i]+M(n,60)/3,ue.value=!1):(u.value[n]=M(n,60)/3,ue.value=!0)))),o.main_skills.unit==="ingredients"){if(o.main_skills.name.includes("Magnet"))(async()=>{try{const v=(await fetch("https://rxgqybcxgapiftblwttl.supabase.co/rest/v1/ingredients?select=name&limit=1",{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ4Z3F5YmN4Z2FwaWZ0Ymx3dHRsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MTcyNTUsImV4cCI6MjA2NTM5MzI1NX0.IAPEGqdMdslVi305yUEsdYqh-ecVOlb82BgvXMTmpwA",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ4Z3F5YmN4Z2FwaWZ0Ymx3dHRsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MTcyNTUsImV4cCI6MjA2NTM5MzI1NX0.IAPEGqdMdslVi305yUEsdYqh-ecVOlb82BgvXMTmpwA",Prefer:"count=exact"}})).headers.get("content-range"),P=v?parseInt(v.split("/")[1]):null,le=Math.ceil(o.main_skills.amount[y-1]/3),ae=1-(1-1/P)*(1-1/(P-1))*(1-1/(P-2)),_=be.value*le*ae;Ve.value=!0,u.value[t]+=_,u.value.hasOwnProperty(i)&&(u.value[i]+=_),u.value.hasOwnProperty(n)&&(u.value[n]+=_),u.value.all=_}catch(f){console.log("ing Fetch problem: "+f.message)}})();else if(o.main_skills.name.includes("Draw")){const f=be.value*o.main_skills.avg_amount[y-1]/o.main_skills.selection.length;o.main_skills.selection.forEach(v=>{u.value.hasOwnProperty(v)?u.value[v]+=f:u.value[v]=f})}}}function Pe(h,x,O,S,o,c,t,i,n,e,r,N,B){let m=O.split(":");const y=parseInt(m[0],10),M=parseInt(m[1],10),f=h==="healer"?Be.value:we.value;let v={};o.forEach(k=>{v[k.m]=0});let P=0;function le(k){for(let p=0;p<o.length;p++)if(k>o[p].e)return P=o[p].e,o[p].m;return P=0,o[o.length-1].m}let ae=le(S),_=0,q=(S-P)/(N/s);for(;ae!==o[o.length-1].m;)v[ae]+=q-_,ae=le(P),_=q,q=(S-P)/(N/s);q=y*s+M*G,v[ae]+=q-_;let xe=0;for(let k in v)xe+=v[k]/parseFloat(k);let ke=0;h==="me"?ke=Math.floor(xe/D.value):ke=Math.floor(xe/Y.value);let A=!1;const U=B?1.2:1;let Q=(c.carry_size+c.previous_evolutions*5)*U+x;for(let k=0;k<t.length;k++)t[k].label==="\uCD5C\uB300 \uC18C\uC9C0 \uC218 \uC5C5 L"||t[k].label==="\uCD5C\uB300 \uC18C\uC9C0 \uC218 \uC5C5 M"||t[k].label==="\uCD5C\uB300 \uC18C\uC9C0 \uC218 \uC5C5 s"?Q+=t[k].mult:t[k].label==="\uB098\uBB34\uC5F4\uB9E4 \uC218 s"&&(A=!0);function te(k,p){return c[`ingredient${p}`].find(V=>V.name===k).amount}let re=0,Me=0,Ne=0,H=1;switch(!0){case i>=60:H=3,re=te(n,0)*f/H,Me=te(e,30)*f/H,Ne=te(r,60)*f/H;break;case i>=30:H=2,re=te(n,0)*f/H,Me=te(e,30)*f/H;break;default:H=1,re=te(n,0)*f/H}let _e=1;c.specialty==="berry"&&(_e+=1),A&&(_e+=1);const Xe=_e*(1-f);return Math.ceil(Q/(Xe+re+Me+Ne))>ke?ke:Math.ceil(Q/(Xe+re+Me+Ne))}function nl(){D.value=0,Y.value=0,a.value=[],ye.value=0,we.value=0,Be.value=0,X.value=0,$.value=0,ze.value=!1,ue.value=!1,Ve.value=!1,je.value=!1,u.value={},L.value={},ce.value=0,be.value=0,ee.value=0}return{onlyBaseSpeed:D,onlyBaseSpeedH:Y,energyAxis:a,finalSpeedCount:ye,finalIngProc:we,finalIngProcH:Be,finalSkillProc:X,finalSkillProcH:$,checkSecondDisplay:ze,checkThirdDisplay:ue,checkIngSkillDisplay:Ve,totalIngCalc:u,timeStaying:L,calcLoading:je,convertH:s,convertM:G,convertS:Ie,simulationCount:We,selfSkillCount:ce,fixedSelfSkillCount:be,helpCountSleep:ee,calcIngProc:De,calcBaseSpeed:el,calcEnergyCurve:ll,calcSpeedWithEner:al,clearCalc:nl,calcSleepSpeedCount:Pe,calcLeveLIng:tl,calcSkillProc:Le}});export{rl as u};
