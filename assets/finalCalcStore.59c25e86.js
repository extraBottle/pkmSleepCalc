import{aE as il,r as w}from"./index.1108b1bb.js";const cl=il("production-calc",()=>{const L=w(0),Y=w(0),a=w([]),Ce=w(0),Fe=w(0),B=w(0),$=w(0),Ne=w(0),_e=w(!1),ce=w(!1),de=w(!1),u=w({}),ee=w({}),qe=w(!1),v=2,G=1/30,Qe=1/(60*30),Ue=1e4,I=w(0),K=w(0);function Ee(h={},Z,b,M,n,c=[]){const t=h.ingredient_percentage;let i=1;Z==="\uC2DD\uC7AC\uB8CC \uB3C4\uC6B0\uBBF8 \uD655\uB960 \u25B2\u25B2"?i=M:b==="\uC2DD\uC7AC\uB8CC \uB3C4\uC6B0\uBBF8 \uD655\uB960 \u25BD\u25BD"&&(i=n);let o=1;for(let e=0;e<c.length;e++)(c[e].label==="\uC2DD\uC7AC\uB8CC \uD655\uB960 \uC5C5 M"||c[e].label==="\uC2DD\uC7AC\uB8CC \uD655\uB960 \uC5C5 s")&&(o+=c[e].mult);return t*i*o/100}function De(h={},Z,b,M,n,c=[]){const t=h.skill_percentage,i=Z==="\uBA54\uC778 \uC2A4\uD0AC \uBC1C\uB3D9\uB960 \u25B2\u25B2"?M:b==="\uBA54\uC778 \uC2A4\uD0AC \uBC1C\uB3D9\uB960 \u25BD\u25BD"?n:1;let o=1;for(let e=0;e<c.length;e++)(c[e].label==="\uC2A4\uD0AC \uD655\uB960 \uC5C5 M"||c[e].label==="\uC2A4\uD0AC \uD655\uB960 \uC5C5 s")&&(o+=c[e].mult);return t*i*o/100}function Le(h,Z,b,M,n,c,t,i,o=[],e={},r,x){const d=b==="\uB3C4\uC6B0\uBBF8 \uC2A4\uD53C\uB4DC \u25B2\u25B2"?n:M==="\uB3C4\uC6B0\uBBF8 \uC2A4\uD53C\uB4DC \u25BD\u25BD"?c:1,m=t*i;let p=0;for(let f=0;f<o.length;f++)(o[f].label==="\uB3C4\uC6B0\uBBF8 \uC2A4\uD53C\uB4DC M"||o[f].label==="\uB3C4\uC6B0\uBBF8 \uC2A4\uD53C\uB4DC s"||o[f].label==="\uB3C4\uC6B0\uBBF8 \uBCF4\uB108\uC2A4")&&(p+=o[f].mult);p=p+m>=r?r:p+m;const g=(501-Z)/500*d*(1-p)*(1-h/100),s=x?.8:1;return e.frequency*g*Qe*s}function el(h=!1,Z=100,b,M,n,c,t,i,o,e,r,x,d,m,p,g="",s,f,P,le,ae,z,H,Pe,ye,A,j,te,oe=[],re=0,ke="",Ze="",q="",be="",Je="",y=!1){a.value=[];let k=te.main_skills.amount[p-1],R=r.main_skills.amount[e-1],ge=!1,xe=1;r.main_skills.name.includes("Charge Energy")?(ge=!0,xe=1):r.main_skills.name.includes("Energizing Cheer")?(ge=!0,xe=5):r.main_skills.name.includes("Energy For Everyone")&&(ge=!0,xe=1);let We=g.split(":");const ve=parseInt(We[0],10),fe=parseInt(We[1],10),se=24*v-ve*v-fe*G,Re=se-1,Xe=Re-Math.floor((se-7*v)/2),$e=Xe-6*v;function Te(J){for(const ne of x)if(J>=ne.e)return ne.m}let Ve=1;le==="\uAE30\uB825 \uD68C\uBCF5\uB7C9 \u25B2\u25B2"?(Ve=z,k=Math.floor(k*z),R=Math.floor(R*z)):ae==="\uAE30\uB825 \uD68C\uBCF5\uB7C9 \u25BD\u25BD"&&(Ve=H,k=Math.floor(k*H),R=Math.floor(R*H));const ze=h?Z:100,Ge=Pe*ye+1;let _=ze/(P/v)*(ve*v+fe*G)*Ve*Ge;_=_>ze?ze:Math.floor(_);function F(J){return J>m?m:J}if(s!=="proVer"){let E=function(l,U=1,W=k){let X=0;switch(l===0?X=_+W:a.value[a.value.length-1].y<=0?X=W*U:X=a.value[a.value.length-1].y+W*U-Math.floor(A/v),X){case X>m:return m;case X<0:return 0;default:return X}};a.value.push({x:0,y:_}),s!=="lightVer"&&(k=0);const J=s==="lightVer"?Math.floor(se/f):0,ne=I.value>0?Math.floor(se/I.value):1;let Q=f;for(let l=0;l<se+1;l++){let U=E(l,0);if(a.value.push({x:l,y:U}),l===0&&(Q-=1),(l===$e||l===Xe||l===Re)&&a.value.push({x:l,y:F(U+Te(U))}),ge&&(l%ne===0||l===0)&&I.value>0){let W=E(l,1,R);a.value.push({x:l,y:F(W)}),I.value-=1}if(l>0&&s==="lightVer"&&l%J===0&&Q>0){let W=E(l);a.value.push({x:l,y:F(W)}),Q-=1}}K.value=we("me",b,g,a.value[a.value.length-1].y,j,r,c,n,t,i,o,A,d)}else if(s==="proVer"){let he=function(S,T,me){let ie=me>m?m:me;S>0?a.value[T].y=(a.value[T].y*S+ie)/(S+1):a.value.push({x:T,y:ie})},ol=function(S){let T=0;return l>0&&(l=l-1*(A/v),l>m&&(l=m)),l<=0&&(l=0),a.value[S-1].y>0&&(T=a.value[S-1].y-1*(A/v),T>m&&(T=m)),T<0?0:T},J=te.main_skills.amount[p-1],ne=1;be==="\uAE30\uB825 \uD68C\uBCF5\uB7C9 \u25B2\u25B2"?(ne=z,J=Math.floor(J*z)):Je==="\uAE30\uB825 \uD68C\uBCF5\uB7C9 \u25BD\u25BD"&&(ne=H,J=Math.floor(J*H));const E=y?Z:100;let Q=E/(P/v)*(ve*v+fe*G)*ne*Ge;Q=Q>E?E:Q;let l=Q,U=.8,W=0,X=.4,Ye=0;for(let S=0;S<Ue;S++){let T=Math.random(),me=Math.random(),ie=0;T<U?(l+=J,ie=1,T<W&&(l+=J,l=F(Math.floor(l)),ie=2),me<X?me<Ye?he(S,0,F(_+R*2+k*ie)):he(S,0,F(_+R+k*ie)):he(S,0,F(_+k*ie))):me<X?me<Ye?he(S,0,F(_+R*2)):he(S,0,F(_+R)):he(S,0,F(_));let Me=Y.value,Se=L.value;for(let O=1;O<se+1;O++){let Oe=function(C){for(let N=0;N<j.length;N++)if(C>j[N].e)return He=j[N].e,j[N].m;return j[j.length-1].m},Ke=function(C,N,V){return(N-V)/(A/v)+C};l=F(l);const Ie=l;let D=ol(O),He=0;const je=Oe(l),pe=Oe(Ie);let Ae=0;if(je!==pe){let C=Ke(O-1,Ie,He)-(O-1);Me=Me-(C/pe+(1-C)/je)%Y.value,Ae=Math.floor((C/pe+(1-C)/je)/Y.value)}else Me=Me-1/pe%Y.value,Ae=Math.floor(1/pe/Y.value);if(Me<=0&&(Ae+=1,Me+=Y.value),ge){let C=0;const N=Oe(D),V=Oe(a.value[O-1].y);if(N!==V){let Be=Ke(O-1,a.value[O-1].y,He)-(O-1);Se=Se-(Be/V+(1-Be)/N)%L.value,C=Math.floor((Be/V+(1-Be)/N)/L.value)}else Se=Se-1/pe%Y.value,C=Math.floor(1/pe/Y.value);Se<=0&&(C+=1,Se+=L.value),(O===$e||O===Xe||O===Re)&&(D+=Te(D),l+=Te(l));const ue=1-Math.pow(1-B.value/xe,C);C>0&&Math.random()<ue&&(D+=R)}const nl=1-Math.pow(1-$.value,Ae);if(Ae>0&&Math.random()<nl&&(D+=k,l+=J),he(S,O,F(D)),l=F(l),O===se){let C=l,N=0;if(D-Math.ceil(A/v*(ve*v+fe*G))<0?N=0:N=D-Math.ceil(A/v*(ve*v+fe*G)),l-Math.ceil(A/v*(ve*v+fe*G))<0?l=0:l=l-Math.ceil(A/v*(ve*v+fe*G)),_=N+_>ze?ze:N+_,l=l+Q>E?E:l+Q,ge){const ue=we("me",b,g,D,j,r,c,n,t,i,o,A,d);X=1-Math.pow(1-B.value/xe,ue),r.specialty=="skill"&&(X=ue*B.value*Math.pow(1-B.value,ue-1),Ye=1-Math.pow(1-B.value,ue)-ue*B.value*Math.pow(1-B.value,ue-1))}const V=we("healer",M,g,C,j,te,oe,re,ke,Ze,q,A,d);U=1-Math.pow(1-$.value,V),te.specialty=="skill"&&(U=V*$.value*Math.pow(1-$.value,V-1),W=1-Math.pow(1-$.value,V)-V*$.value*Math.pow(1-$.value,V-1))}}}}}function ll(h=[],Z="target",b,M){ee.value={},h.forEach(e=>{ee.value[e.m]=0});let n=0;function c(e){for(let r=0;r<h.length;r++)if(e>h[r].e)return n=h[r].e,h[r].m;return n=h[h.length-1].e,h[h.length-1].m}function t(e,r,x){return(x-a.value[e].y)/((a.value[e].y-a.value[r].y)/(a.value[e].x-a.value[r].x))+a.value[e].x}for(let e=0;e<a.value.length-1;e++)if(a.value[e].x!==a.value[e+1].x){let r=c(a.value[e+1].y),x=a.value[e].x,d=!0,m=a.value[e+1].x;Z==="proVer"&&a.value[e].y<=a.value[e+1].y&&(r=c(a.value[e].y-b/v*(a.value[e+1].x-a.value[e].x)));let p=c(a.value[e].y);for(;d;)p===r?(ee.value[p]+=a.value[e+1].x-x,d=!1):(m=t(e,e+1,n),ee.value[p]+=m-x,p=c(n),x=m)}let i=0;for(let e in ee.value)i+=ee.value[e]/parseFloat(e);Ne.value=Math.floor(i/L.value);const o=K.value*B.value>M?M:K.value*B.value;I.value=Ne.value*B.value+o}function al(h,Z,b,M=!1,n={},c,t,i,o,e,r,x,d,m,p){h==="proVer"&&(K.value=we("me",Z,e,a.value[a.value.length-1].y,x,n,d,c,t,i,o,r,m));function g(s,f){const P=n[`ingredient${f}`].find(le=>le.name===s).amount;return M?K.value*Ce.value*P:(Ne.value+K.value)*Ce.value*P}if(u.value[t]=g(t,0),c>=30&&(i===t?(u.value[t]=(u.value[t]+g(i,30))/2,_e.value=!1):(u.value[t]=u.value[t]/2,u.value[i]=g(i,30)/2,_e.value=!0),c>=60&&(u.value[t]=u.value[t]*2/3,t===i?o!==i?(u.value[o]=g(o,60)/3,ce.value=!0):(u.value[t]=u.value[t]+g(o,60)/3,ce.value=!1):(u.value[i]=u.value[i]*2/3,o===t?(u.value[t]=u.value[t]+g(o,60)/3,ce.value=!1):o===i?(u.value[i]=u.value[i]+g(o,60)/3,ce.value=!1):(u.value[o]=g(o,60)/3,ce.value=!0)))),n.main_skills.unit==="ingredients"){if(Math.min(K.value*B.value,b),n.main_skills.name.includes("Magnet"))(async()=>{try{const f=(await fetch("https://rxgqybcxgapiftblwttl.supabase.co/rest/v1/ingredients?select=name&limit=1",{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ4Z3F5YmN4Z2FwaWZ0Ymx3dHRsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk0NzEwNzcsImV4cCI6MjA2NTA0NzA3N30.ZiTqI--4pvZoON49flk2N5f7ZF2BwdU7evwZGpcg8PQ",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ4Z3F5YmN4Z2FwaWZ0Ymx3dHRsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk0NzEwNzcsImV4cCI6MjA2NTA0NzA3N30.ZiTqI--4pvZoON49flk2N5f7ZF2BwdU7evwZGpcg8PQ",Prefer:"count=exact"}})).headers.get("content-range"),P=f?parseInt(f.split("/")[1]):null,le=Math.ceil(n.main_skills.amount[p-1]/3),ae=1-(1-1/P)*(1-1/(P-1))*(1-1/(P-2)),z=I.value*le*ae;de.value=!0,u.value[t]+=z,u.value.hasOwnProperty(i)&&(u.value[i]+=z),u.value.hasOwnProperty(o)&&(u.value[o]+=z),u.value.all=z}catch(s){console.log("ing Fetch problem: "+s.message)}})();else if(n.main_skills.name.includes("Draw")){const s=I.value*n.main_skills.avg_amount[p-1]/n.main_skills.selection.length;n.main_skills.selection.forEach(f=>{u.value.hasOwnProperty(f)?u.value[f]+=s:u.value[f]=s})}}}function we(h,Z,b,M,n,c,t,i,o,e,r,x,d){let m=b.split(":");const p=parseInt(m[0],10),g=parseInt(m[1],10),s=h==="healer"?Fe.value:Ce.value;let f={};n.forEach(y=>{f[y.m]=0});let P=0;function le(y){for(let k=0;k<n.length;k++)if(y>n[k].e)return P=n[k].e,n[k].m;return P=0,n[n.length-1].m}let ae=le(M),z=0,H=(M-P)/(x/v);for(;ae!==n[n.length-1].m;)f[ae]+=H-z,ae=le(P),z=H,H=(M-P)/(x/v);H=p*v+g*G,f[ae]+=H-z;let Pe=0;for(let y in f)Pe+=f[y]/parseFloat(y);let ye=0;h==="me"?ye=Math.floor(Pe/L.value):ye=Math.floor(Pe/Y.value);let A=!1;const j=d?1.2:1;let te=(c.carry_size+c.previous_evolutions*5)*j+Z;for(let y=0;y<t.length;y++)t[y].label==="\uCD5C\uB300 \uC18C\uC9C0 \uC218 \uC5C5 L"||t[y].label==="\uCD5C\uB300 \uC18C\uC9C0 \uC218 \uC5C5 M"||t[y].label==="\uCD5C\uB300 \uC18C\uC9C0 \uC218 \uC5C5 s"?te+=t[y].mult:t[y].label==="\uB098\uBB34\uC5F4\uB9E4 \uC218 s"&&(A=!0);function oe(y,k){return c[`ingredient${k}`].find(R=>R.name===y).amount}let re=0,ke=0,Ze=0,q=1;switch(!0){case i>=60:q=3,re=oe(o,0)*s/q,ke=oe(e,30)*s/q,Ze=oe(r,60)*s/q;break;case i>=30:q=2,re=oe(o,0)*s/q,ke=oe(e,30)*s/q;break;default:q=1,re=oe(o,0)*s/q}let be=1;c.specialty==="berry"&&(be+=1),A&&(be+=1);const Je=be*(1-s);return Math.ceil(te/(Je+re+ke+Ze))>ye?ye:Math.ceil(te/(Je+re+ke+Ze))}function tl(){L.value=0,Y.value=0,a.value=[],Ne.value=0,Ce.value=0,Fe.value=0,B.value=0,$.value=0,_e.value=!1,ce.value=!1,de.value=!1,qe.value=!1,u.value={},ee.value={},I.value=0,K.value=0}return{onlyBaseSpeed:L,onlyBaseSpeedH:Y,energyAxis:a,finalSpeedCount:Ne,finalIngProc:Ce,finalIngProcH:Fe,finalSkillProc:B,finalSkillProcH:$,checkSecondDisplay:_e,checkThirdDisplay:ce,checkIngSkillDisplay:de,totalIngCalc:u,timeStaying:ee,calcLoading:qe,convertH:v,convertM:G,convertS:Qe,simulationCount:Ue,selfSkillCount:I,helpCountSleep:K,calcIngProc:Ee,calcBaseSpeed:Le,calcEnergyCurve:el,calcSpeedWithEner:ll,clearCalc:tl,calcSleepSpeedCount:we,calcLeveLIng:al,calcSkillProc:De}});export{cl as u};
