import{aE as ul,r as N}from"./index.6ebc0bed.js";const cl=ul("production-calc",()=>{const L=N(0),F=N(0),a=N([]),Ce=N(0),ze=N(0),X=N(0),W=N(0),we=N(0),Be=N(!1),ce=N(!1),Oe=N(!1),i=N({}),ee=N({}),Ie=N(!1),s=2,$=1/30,je=1/(60*30),Ge=1e4,q=N(0),K=N(0);function De(h={},P,Z,g,o,c=[]){const t=h.ingredient_percentage;let u=1;P==="\uC2DD\uC7AC\uB8CC \uB3C4\uC6B0\uBBF8 \uD655\uB960 \u25B2\u25B2"?u=g:Z==="\uC2DD\uC7AC\uB8CC \uB3C4\uC6B0\uBBF8 \uD655\uB960 \u25BD\u25BD"&&(u=o);let n=1;for(let e=0;e<c.length;e++)(c[e].label==="\uC2DD\uC7AC\uB8CC \uD655\uB960 \uC5C5 M"||c[e].label==="\uC2DD\uC7AC\uB8CC \uD655\uB960 \uC5C5 s")&&(n+=c[e].mult);return t*u*n/100}function Ee(h={},P,Z,g,o,c=[]){const t=h.skill_percentage,u=P==="\uBA54\uC778 \uC2A4\uD0AC \uBC1C\uB3D9\uB960 \u25B2\u25B2"?g:Z==="\uBA54\uC778 \uC2A4\uD0AC \uBC1C\uB3D9\uB960 \u25BD\u25BD"?o:1;let n=1;for(let e=0;e<c.length;e++)(c[e].label==="\uC2A4\uD0AC \uD655\uB960 \uC5C5 M"||c[e].label==="\uC2A4\uD0AC \uD655\uB960 \uC5C5 s")&&(n+=c[e].mult);return t*u*n/100}function Le(h,P,Z,g,o,c,t,u,n=[],e={},r,_){const O=Z==="\uB3C4\uC6B0\uBBF8 \uC2A4\uD53C\uB4DC \u25B2\u25B2"?o:g==="\uB3C4\uC6B0\uBBF8 \uC2A4\uD53C\uB4DC \u25BD\u25BD"?c:1,m=t*u;let p=0;for(let v=0;v<n.length;v++)(n[v].label==="\uB3C4\uC6B0\uBBF8 \uC2A4\uD53C\uB4DC M"||n[v].label==="\uB3C4\uC6B0\uBBF8 \uC2A4\uD53C\uB4DC s"||n[v].label==="\uB3C4\uC6B0\uBBF8 \uBCF4\uB108\uC2A4")&&(p+=n[v].mult);p=p+m>=r?r:p+m;const k=(501-P)/500*O*(1-p)*(1-h/100),f=_?.8:1;return e.frequency*k*je*f}function el(h=!1,P=100,Z,g,o,c,t,u,n,e,r,_,O,m,p,k="",f,v,x,le,ae,b,V,xe,ye,A,Q,te,ne=[],re=0,Me="",Pe="",I="",Ze="",Je="",y=!1){a.value=[];let M=te.main_skills.amount[p-1],d=r.main_skills.amount[e-1],ke=!1,_e=1;r.main_skills.name.includes("Charge Energy")?(ke=!0,_e=1):r.main_skills.name.includes("Energizing Cheer")?(ke=!0,_e=5):r.main_skills.name.includes("Energy For Everyone")&&(ke=!0,_e=1);let Ue=k.split(":");const se=parseInt(Ue[0],10),ve=parseInt(Ue[1],10),fe=24*s-se*s-ve*$,de=fe-1,Re=de-Math.floor((fe-7*s)/2),We=Re-6*s;function He(J){for(const oe of _)if(J>=oe.e)return oe.m}let Ye=1;le==="\uAE30\uB825 \uD68C\uBCF5\uB7C9 \u25B2\u25B2"?(Ye=b,M=Math.floor(M*b),d=Math.floor(d*b)):ae==="\uAE30\uB825 \uD68C\uBCF5\uB7C9 \u25BD\u25BD"&&(Ye=V,M=Math.floor(M*V),d=Math.floor(d*V));const be=h?P:100,$e=xe*ye+1;let B=be/(x/s)*(se*s+ve*$)*Ye*$e;B=B>be?be:Math.floor(B);function z(J){return J>m?m:J}if(f!=="proVer"){let D=function(l,G=1,U=M){let R=0;switch(l===0?R=B+U:a.value[a.value.length-1].y<=0?R=U*G:R=a.value[a.value.length-1].y+U*G-Math.floor(A/s),R){case R>m:return m;case R<0:return 0;default:return R}};a.value.push({x:0,y:B}),f!=="lightVer"&&(M=0);const J=f==="lightVer"?Math.floor(fe/v):0,oe=q.value>0?Math.floor(fe/q.value):1;let j=v;for(let l=0;l<fe+1;l++){let G=D(l,0);if(a.value.push({x:l,y:G}),l===0&&(j-=1),(l===We||l===Re||l===de)&&a.value.push({x:l,y:z(G+He(G))}),ke&&(l%oe===0||l===0)&&q.value>0){let U=D(l,1,d);a.value.push({x:l,y:z(U)}),q.value-=1}if(l>0&&f==="lightVer"&&l%J===0&&j>0){let U=D(l);a.value.push({x:l,y:z(U)}),j-=1}}K.value=Ne("me",Z,k,a.value[a.value.length-1].y,Q,r,c,o,t,u,n,A,O)}else if(f==="proVer"){let he=function(S,H,me){let ue=me>m?m:me;S>0?a.value[H].y=(a.value[H].y*S+ue)/(S+1):a.value.push({x:H,y:ue})},nl=function(S){let H=0;return l>0&&(l=l-1*(A/s),l>m&&(l=m)),l<=0&&(l=0),a.value[S-1].y>0&&(H=a.value[S-1].y-1*(A/s),H>m&&(H=m)),H<0?0:H},J=te.main_skills.amount[p-1],oe=1;Ze==="\uAE30\uB825 \uD68C\uBCF5\uB7C9 \u25B2\u25B2"?(oe=b,J=Math.floor(J*b)):Je==="\uAE30\uB825 \uD68C\uBCF5\uB7C9 \u25BD\u25BD"&&(oe=V,J=Math.floor(J*V));const D=y?P:100;let j=D/(x/s)*(se*s+ve*$)*oe*$e;j=j>D?D:j;let l=j,G=.8,U=0,R=.4,Fe=0;for(let S=0;S<Ge;S++){let H=Math.random(),me=Math.random(),ue=0;H<G?(l+=J,ue=1,H<U&&(l+=J,l=z(Math.floor(l)),ue=2),me<R?me<Fe?he(S,0,z(B+d*2+M*ue)):he(S,0,z(B+d+M*ue)):he(S,0,z(B+M*ue))):me<R?me<Fe?he(S,0,z(B+d*2)):he(S,0,z(B+d)):he(S,0,z(B));let ge=F.value,Se=L.value;for(let T=1;T<fe+1;T++){let Te=function(C){for(let w=0;w<Q.length;w++)if(C>Q[w].e)return Ve=Q[w].e,Q[w].m;return Q[Q.length-1].m},Ke=function(C,w,Y){return(w-Y)/(A/s)+C};l=z(l);const qe=l;let E=nl(T),Ve=0;const Qe=Te(l),pe=Te(qe);let Ae=0;if(Qe!==pe){let C=Ke(T-1,qe,Ve)-(T-1);ge=ge-(C/pe+(1-C)/Qe)%F.value,Ae=Math.floor((C/pe+(1-C)/Qe)/F.value)}else ge=ge-1/pe%F.value,Ae=Math.floor(1/pe/F.value);if(ge<=0&&(Ae+=1,ge+=F.value),ke){let C=0;const w=Te(E),Y=Te(a.value[T-1].y);if(w!==Y){let Xe=Ke(T-1,a.value[T-1].y,Ve)-(T-1);Se=Se-(Xe/Y+(1-Xe)/w)%L.value,C=Math.floor((Xe/Y+(1-Xe)/w)/L.value)}else Se=Se-1/pe%F.value,C=Math.floor(1/pe/F.value);Se<=0&&(C+=1,Se+=L.value),(T===We||T===Re||T===de)&&(E+=He(E),l+=He(l));const ie=1-Math.pow(1-X.value/_e,C);C>0&&Math.random()<ie&&(E+=d)}const ol=1-Math.pow(1-W.value,Ae);if(Ae>0&&Math.random()<ol&&(E+=M,l+=J),he(S,T,z(E)),l=z(l),T===fe){let C=l,w=0;if(E-Math.ceil(A/s*(se*s+ve*$))<0?w=0:w=E-Math.ceil(A/s*(se*s+ve*$)),l-Math.ceil(A/s*(se*s+ve*$))<0?l=0:l=l-Math.ceil(A/s*(se*s+ve*$)),B=w+B>be?be:w+B,l=l+j>D?D:l+j,ke){const ie=Ne("me",Z,k,E,Q,r,c,o,t,u,n,A,O);R=1-Math.pow(1-X.value/_e,ie),r.specialty=="skill"&&(R=ie*X.value*Math.pow(1-X.value,ie-1),Fe=1-Math.pow(1-X.value,ie)-ie*X.value*Math.pow(1-X.value,ie-1))}const Y=Ne("healer",g,k,C,Q,te,ne,re,Me,Pe,I,A,O);G=1-Math.pow(1-W.value,Y),te.specialty=="skill"&&(G=Y*W.value*Math.pow(1-W.value,Y-1),U=1-Math.pow(1-W.value,Y)-Y*W.value*Math.pow(1-W.value,Y-1))}}}}}function ll(h=[],P="target",Z,g){ee.value={},h.forEach(e=>{ee.value[e.m]=0});let o=0;function c(e){for(let r=0;r<h.length;r++)if(e>h[r].e)return o=h[r].e,h[r].m;return o=h[h.length-1].e,h[h.length-1].m}function t(e,r,_){return(_-a.value[e].y)/((a.value[e].y-a.value[r].y)/(a.value[e].x-a.value[r].x))+a.value[e].x}for(let e=0;e<a.value.length-1;e++)if(a.value[e].x!==a.value[e+1].x){let r=c(a.value[e+1].y),_=a.value[e].x,O=!0,m=a.value[e+1].x;P==="proVer"&&a.value[e].y<=a.value[e+1].y&&(r=c(a.value[e].y-Z/s*(a.value[e+1].x-a.value[e].x)));let p=c(a.value[e].y);for(;O;)p===r?(ee.value[p]+=a.value[e+1].x-_,O=!1):(m=t(e,e+1,o),ee.value[p]+=m-_,p=c(o),_=m)}let u=0;for(let e in ee.value)u+=ee.value[e]/parseFloat(e);we.value=Math.floor(u/L.value);const n=K.value*X.value>g?g:K.value*X.value;q.value=we.value*X.value+n}function al(h,P,Z,g=!1,o={},c,t,u,n,e,r,_,O,m,p){h==="proVer"&&(K.value=Ne("me",P,e,a.value[a.value.length-1].y,_,o,O,c,t,u,n,r,m));function k(f,v){const x=o[`ingredient${v}`].find(le=>le.name===f).amount;return g?K.value*Ce.value*x:(we.value+K.value)*Ce.value*x}if(i.value[t]=k(t,0),c>=30&&(u===t?(i.value[t]=(i.value[t]+k(u,30))/2,Be.value=!1):(i.value[t]=i.value[t]/2,i.value[u]=k(u,30)/2,Be.value=!0),c>=60&&(i.value[t]=i.value[t]*2/3,t===u?n!==u?(i.value[n]=k(n,60)/3,ce.value=!0):(i.value[t]=i.value[t]+k(n,60)/3,ce.value=!1):(i.value[u]=i.value[u]*2/3,n===t?(i.value[t]=i.value[t]+k(n,60)/3,ce.value=!1):n===u?(i.value[u]=i.value[u]+k(n,60)/3,ce.value=!1):(i.value[n]=k(n,60)/3,ce.value=!0)))),o.main_skills.unit==="ingredients"){if(Math.min(K.value*X.value,Z),o.main_skills.name.includes("Magnet"))(async()=>{try{const v=(await fetch("https://rxgqybcxgapiftblwttl.supabase.co/rest/v1/ingredients?select=name&limit=1",{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ4Z3F5YmN4Z2FwaWZ0Ymx3dHRsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0OTQ3MTA3NywiZXhwIjoyMDY1MDQ3MDc3fQ.wNIcL98lTDAGLN1wvmujLoC259BDpXQH15NNG5K0BHU",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ4Z3F5YmN4Z2FwaWZ0Ymx3dHRsIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0OTQ3MTA3NywiZXhwIjoyMDY1MDQ3MDc3fQ.wNIcL98lTDAGLN1wvmujLoC259BDpXQH15NNG5K0BHU",Prefer:"count=exact"}})).headers.get("content-range"),x=v?parseInt(v.split("/")[1]):null,le=Math.ceil(o.main_skills.amount[p-1]/3),ae=1-(1-1/x)*(1-1/(x-1))*(1-1/(x-2)),b=q.value*le*ae;Oe.value=!0,i.value[t]+=b,i.value.hasOwnProperty(u)&&(i.value[u]+=b),i.value.hasOwnProperty(n)&&(i.value[n]+=b),i.value.all=b}catch(f){console.log("ing Fetch problem: "+f.message)}})();else if(o.main_skills.name.includes("Draw")){const f=q.value*o.main_skills.avg_amount[p-1]/o.main_skills.selection.length;o.main_skills.selection.forEach(v=>{i.value.hasOwnProperty(v)?i.value[v]+=f:i.value[v]=f})}}}function Ne(h,P,Z,g,o,c,t,u,n,e,r,_,O){let m=Z.split(":");const p=parseInt(m[0],10),k=parseInt(m[1],10),f=h==="healer"?ze.value:Ce.value;let v={};o.forEach(y=>{v[y.m]=0});let x=0;function le(y){for(let M=0;M<o.length;M++)if(y>o[M].e)return x=o[M].e,o[M].m;return x=0,o[o.length-1].m}let ae=le(g),b=0,V=(g-x)/(_/s);for(;ae!==o[o.length-1].m;)v[ae]+=V-b,ae=le(x),b=V,V=(g-x)/(_/s);V=p*s+k*$,v[ae]+=V-b;let xe=0;for(let y in v)xe+=v[y]/parseFloat(y);let ye=0;h==="me"?ye=Math.floor(xe/L.value):ye=Math.floor(xe/F.value);let A=!1;const Q=O?1.2:1;let te=(c.carry_size+c.previous_evolutions*5)*Q+P;for(let y=0;y<t.length;y++)t[y].label==="\uCD5C\uB300 \uC18C\uC9C0 \uC218 \uC5C5 L"||t[y].label==="\uCD5C\uB300 \uC18C\uC9C0 \uC218 \uC5C5 M"||t[y].label==="\uCD5C\uB300 \uC18C\uC9C0 \uC218 \uC5C5 s"?te+=t[y].mult:t[y].label==="\uB098\uBB34\uC5F4\uB9E4 \uC218 s"&&(A=!0);function ne(y,M){return c[`ingredient${M}`].find(d=>d.name===y).amount}let re=0,Me=0,Pe=0,I=1;switch(!0){case u>=60:I=3,re=ne(n,0)*f/I,Me=ne(e,30)*f/I,Pe=ne(r,60)*f/I;break;case u>=30:I=2,re=ne(n,0)*f/I,Me=ne(e,30)*f/I;break;default:I=1,re=ne(n,0)*f/I}let Ze=1;c.specialty==="berry"&&(Ze+=1),A&&(Ze+=1);const Je=Ze*(1-f);return Math.ceil(te/(Je+re+Me+Pe))>ye?ye:Math.ceil(te/(Je+re+Me+Pe))}function tl(){L.value=0,F.value=0,a.value=[],we.value=0,Ce.value=0,ze.value=0,X.value=0,W.value=0,Be.value=!1,ce.value=!1,Oe.value=!1,Ie.value=!1,i.value={},ee.value={},q.value=0,K.value=0}return{onlyBaseSpeed:L,onlyBaseSpeedH:F,energyAxis:a,finalSpeedCount:we,finalIngProc:Ce,finalIngProcH:ze,finalSkillProc:X,finalSkillProcH:W,checkSecondDisplay:Be,checkThirdDisplay:ce,checkIngSkillDisplay:Oe,totalIngCalc:i,timeStaying:ee,calcLoading:Ie,convertH:s,convertM:$,convertS:je,simulationCount:Ge,selfSkillCount:q,helpCountSleep:K,calcIngProc:De,calcBaseSpeed:Le,calcEnergyCurve:el,calcSpeedWithEner:ll,clearCalc:tl,calcSleepSpeedCount:Ne,calcLeveLIng:al,calcSkillProc:Ee}});export{cl as u};
